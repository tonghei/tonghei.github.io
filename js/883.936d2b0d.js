"use strict";(self["webpackChunktodolist"]=self["webpackChunktodolist"]||[]).push([[883],{2883:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",[e("ul",{staticClass:"canvas-type"},[e("li",{class:{isActive:0==t.isActive},on:{click:function(e){return t.changeCanves(0)}}},[t._v(" 折线图 ")]),e("li",{class:{isActive:1==t.isActive},on:{click:function(e){return t.changeCanves(1)}}},[t._v(" 柱状图 ")])]),t._m(0),e("canvas",{attrs:{width:"800px",height:"500px"}},[t._v("当前浏览器版本过低,请升级浏览器后打开哦")]),e("div",{staticClass:"collect"},[e("ul",[e("li",[t._v(" 昨日完成待办 "),e("span",[e("em",[t._v(t._s(t.yesterdayList.complete)+" ")]),t._v("件")])]),e("li",[t._v(" 昨日完成率 "),e("span",[e("em",[t._v(t._s(t.yesterdayList.percentage)+" ")]),t._v("%")])]),e("li",[t._v(" 今日完成待办 "),e("span",[e("em",[t._v(t._s(t.todayList)+" ")]),t._v("件")])]),e("li",[t._v(" 总待办数 "),e("span",[e("em",[t._v(t._s(t.todolist.length)+" ")]),t._v("件")])])])])])},l=[function(){var t=this,e=t._self._c;return e("ul",{staticClass:"canvas-hint"},[e("li",[e("span"),t._v("当前天总事件")]),e("li",[e("span"),t._v("当前完成事件")])])}],a=(s(7658),s(3822)),n={name:"DataStatistical",data(){return{isActive:0,canvas:null,canvasContext:null}},mounted(){this.canvas=document.querySelector("canvas"),this.canvasContext=this.canvas.getContext("2d"),this.drawLineChart()},computed:{...(0,a.rn)(["nowday","todolist"]),nowWeek(){let t=Number(this.nowday.split(".")[2]),e=t-6,s=[];if(e>1)for(let i=e;i<=t;i++){let t={},e=this.nowday.split(".")[0]+this.nowday.split(".")[1]+i,l=this.todolist.filter((t=>t.dater==e)),a=l.filter((t=>t.isChecked));e=this.nowday.split(".")[0]+"."+this.nowday.split(".")[1]+"."+i,t.dater=e,t.allList=l.length,t.CompleteList=a.length,s.push(t)}else{let t=this.nowday.split(".")[0],i=this.nowday.split(".")[1],l=i-1,a=t,n=[1,3,5,7,8,10,12];if(l<=0){l=12,a=t-1,e+=31;for(let t=0;t<7;t++){let t={},i=a+l+e,n=this.todolist.filter((t=>t.dater==i)),o=n.filter((t=>t.isChecked));i=a+"."+l+"."+e,t.dater=i,t.allList=n.length,t.CompleteList=o.length,s.push(t),e++,e>31&&(e=1,l=1,a++)}}else if(t%4==0&&t%100!=0||t%400==0)if(2==l){e+=29;for(let t=0;t<7;t++){let t={},i=a+l+e,n=this.todolist.filter((t=>t.dater==i)),o=n.filter((t=>t.isChecked));i=a+"."+l+"."+e,t.dater=i,t.allList=n.length,t.CompleteList=o.length,e++,e>29&&(e=1,l++),s.push(t)}}else if(n.includes(l)){e+=31;for(let t=0;t<7;t++){let t={},i=a+l+e,n=this.todolist.filter((t=>t.dater==i)),o=n.filter((t=>t.isChecked));i=a+"."+l+"."+e,t.dater=i,t.allList=n.length,t.CompleteList=o.length,s.push(t),e++,e>31&&(e=1,l++)}}else{e+=30;for(let t=0;t<7;t++){let t={},i=a+l+e,n=this.todolist.filter((t=>t.dater==i)),o=n.filter((t=>t.isChecked));i=a+"."+l+"."+e,t.dater=i,t.allList=n.length,t.CompleteList=o.length,s.push(t),e++,e>30&&(e=1,l++)}}else if(2==l){e+=28;for(let t=0;t<7;t++){let t={},i=a+l+e,n=this.todolist.filter((t=>t.dater==i)),o=n.filter((t=>t.isChecked));i=a+"."+l+"."+e,t.dater=i,t.allList=n.length,t.CompleteList=o.length,s.push(t),e++,e>28&&(e=1,l++)}}else if(n.includes(l)){e+=31;for(let t=0;t<7;t++){let t={},i=a+l+e,n=this.todolist.filter((t=>t.dater==i)),o=n.filter((t=>t.isChecked));i=a+"."+l+"."+e,t.dater=i,t.allList=n.length,t.CompleteList=o.length,s.push(t),e++,e>31&&(e=1,l++)}}else{e+=30;for(let t=0;t<7;t++){let t={},i=a+l+e,n=this.todolist.filter((t=>t.dater==i)),o=n.filter((t=>t.isChecked));i=a+"."+l+"."+e,t.dater=i,t.allList=n.length,t.CompleteList=o.length,s.push(t),e++,e>30&&(e=1,l++)}}}return s},yesterdayList(){if(1!=this.nowday.split[2]){let t=this.todolist.filter((t=>t.dater==""+this.nowday.split(".")[0]+this.nowday.split(".")[1]+(this.nowday.split(".")[2]-1))),e=t.filter((t=>t.isChecked)),s=Math.floor(e.length/t.length*100);return t.length||(s=0),{complete:e.length,overall:t.length,percentage:s}}},todayList(){console.log(this.todolist);let t=this.todolist.filter((t=>t.dater==""+this.nowday.split(".")[0]+this.nowday.split(".")[1]+this.nowday.split(".")[2])),e=t.filter((t=>t.isChecked));return console.log(t,e),e.length}},methods:{drawSolidLine(t,e,s,i,l,a){this.canvasContext.beginPath(),this.canvasContext.moveTo(t,e),this.canvasContext.lineTo(s,i),this.canvasContext.strokeStyle=l,this.canvasContext.lineWidth=a,this.canvasContext.stroke(),this.canvasContext.closePath()},drawDottedLine(t,e,s,i,l,a,n){let o=t,h=e,r=(t-s)/n,c=(e-i)/n;for(let d=1;d<=n;d++){let s=t-r*d,i=e-c*d;d%2!=0&&this.drawSolidLine(o,h,s,i,l,a),o=s,h=i}},drawLineChart(){this.clearCanvas(),this.canvasContext.font="16px serif",this.canvasContext.fillStyle="rgb(51, 118, 247)";let t=35,e=[137,450],s=470,i=35,l=458;for(let o=1;o<10;o++)l-=40,this.canvasContext.fillText(o,i,l);let a=[],n=[];this.nowWeek.forEach(((i,l)=>{t+=86,this.canvasContext.fillStyle="rgb(51, 118, 247)",this.canvasContext.strokeStyle="rgb(51, 118, 247)",this.canvasContext.fillText(`${i.dater.split(".")[1]}.${i.dater.split(".")[2]}`,t,s),0!=l?(this.drawSolidLine(a[0],a[1],e[0]+87*l,e[1]-40*i.allList,"#2c9678",2),a[0]=e[0]+87*l,a[1]=e[1]-40*i.allList,this.canvasContext.beginPath(),this.canvasContext.fillStyle="#2c9678",this.canvasContext.strokeStyle="#2c9678",this.canvasContext.arc(a[0],a[1],3,0,2*Math.PI),this.canvasContext.fill(),this.canvasContext.stroke()):(a[0]=e[0]+87*l,a[1]=e[1]-40*i.allList,this.canvasContext.beginPath(),this.canvasContext.fillStyle="#2c9678",this.canvasContext.strokeStyle="#2c9678",this.canvasContext.arc(a[0],a[1],3,0,2*Math.PI),this.canvasContext.fill(),this.canvasContext.stroke()),0!=l?(this.drawSolidLine(n[0],n[1],e[0]+87*l,e[1]-40*i.CompleteList,"#e7a23f",2),n[0]=e[0]+87*l,n[1]=e[1]-40*i.CompleteList,this.canvasContext.beginPath(),this.canvasContext.fillStyle="#e7a23f",this.canvasContext.strokeStyle="#e7a23f",this.canvasContext.arc(n[0],n[1],3,0,2*Math.PI),this.canvasContext.fill(),this.canvasContext.stroke()):(n[0]=e[0]+87*l,n[1]=e[1]-40*i.CompleteList,this.canvasContext.beginPath(),this.canvasContext.fillStyle="#e7a23f",this.canvasContext.strokeStyle="#e7a23f",this.canvasContext.arc(n[0],n[1],3,0,2*Math.PI),this.canvasContext.fill(),this.canvasContext.stroke())})),this.drawCoordinate()},diawHistogram(){this.clearCanvas(),this.canvasContext.font="16px serif",this.canvasContext.fillStyle="rgb(51, 118, 247)";let t=35,e=470,s=35,i=458,l=105,a=135;for(let n=1;n<10;n++)i-=40,this.canvasContext.fillText(n,s,i);console.log(this.nowWeek),this.nowWeek.forEach((s=>{t+=86,this.canvasContext.fillStyle="rgb(51, 118, 247)",this.canvasContext.strokeStyle="rgb(51, 118, 247)",this.canvasContext.fillText(`${s.dater.split(".")[1]}.${s.dater.split(".")[2]}`,t,e);let i=40*s.allList;i||(i=2),this.canvasContext.fillStyle="#2c9678",this.canvasContext.fillRect(l,450-i,30,i);let n=40*s.CompleteList;n||(n=2),this.canvasContext.fillStyle="#e7a23f",this.canvasContext.fillRect(a,450-n,30,n),a+=85,l+=85})),this.drawCoordinate()},drawCoordinate(){this.drawSolidLine(50,50,50,450,"rgb(52, 118, 244)",2),this.drawSolidLine(50,450,750,450,"rgb(52, 118, 244)",2),this.drawSolidLine(750,450,735,458,"rgb(52, 118, 244)",2),this.drawSolidLine(750,450,735,442,"rgb(52, 118, 244)",2),this.drawSolidLine(50,50,58,65,"rgb(52, 118, 244)",2),this.drawSolidLine(42,65,50,50,"rgb(52, 118, 244)",2)},clearCanvas(){this.canvasContext.fillStyle="#fff",this.canvasContext.fillRect(0,0,800,500)},changeCanves(t){this.isActive=t,1==t?this.diawHistogram():this.drawLineChart()}}},o=n,h=s(1001),r=(0,h.Z)(o,i,l,!1,null,"46416826",null),c=r.exports}}]);
//# sourceMappingURL=883.936d2b0d.js.map